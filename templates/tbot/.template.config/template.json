{
  "$schema": "http://json.schemastore.org/template",
  "author": "Bot",
  "classifications": ["Bot"],
  "identity": "Bot.Template.Tbot",
  "name": "TBot",
  "shortName": "tbot",
  "sourceName": "Tbot",
  "preferNameDirectory": true,
  "symbols": {
    "transport": {
      "type": "parameter",
      "datatype": "choice",
      "description": "Транспорт обновлений",
      "choices": [
        { "choice": "polling", "description": "Polling" },
        { "choice": "webhook", "description": "Webhook" }
      ],
      "defaultValue": "polling"
    },
    "store": {
      "type": "parameter",
      "datatype": "choice",
      "description": "Хранилище состояния",
      "choices": [
        { "choice": "file", "description": "Файлы" },
        { "choice": "redis", "description": "Redis" }
      ],
      "defaultValue": "file"
    },
    "admin": {
      "type": "parameter",
      "datatype": "bool",
      "description": "Подключить административное API",
      "defaultValue": "false"
    },
    "webapp": {
      "type": "parameter",
      "datatype": "bool",
      "description": "Подключить Web App",
      "defaultValue": "false"
    },
    "skipRestore": {
      "type": "parameter",
      "datatype": "bool",
      "description": "Пропустить автоматическое восстановление пакетов",
      "defaultValue": "false"
    }
  },
  "primaryOutputs": [
    { "path": "Tbot.csproj" }
  ],
  "postActions": [
    {
      "condition": "(!skipRestore)",
      "description": "Восстановить пакеты",
      "manualInstructions": [ { "text": "dotnet restore" } ],
      "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025",
      "continueOnError": true
    },
    {
      "condition": "(OS != \"Windows_NT\")",
      "description": "Сделать run.sh исполняемым",
      "actionId": "CB9A6CF3-4F5C-4860-B9D2-03A574959774",
      "args": { "+x": "run.sh" },
      "continueOnError": true
    },
    {
      "description": "Быстрый старт",
      "manualInstructions": [
        { "condition": "(OS == \"Windows_NT\")", "text": ".\\run.ps1" },
        { "condition": "(OS != \"Windows_NT\")", "text": "./run.sh" }
      ],
      "actionId": "AC1156F7-BB77-4DB8-B28F-24EEBCCA1E5C",
      "continueOnError": true
    }
  ]
}
